---
title: 表单的心智模型
date: "2024-06-22"
language: zh-CN
category: other
---

从 API 角度来看，表单无非是一些字段的集合，它承载着 CRUD 功能:

- 创建(Create) - 也可以叫新增(Add)
- 查看(Read)
- 更新(Update) - 也可以叫编辑(Edit)
- 删除(Delete)

看起来很简单对吧？API 作为前后端之间的中间层本来就应该是简单的。API 之下后端要考虑数据存储和操作，API 之上前端要考虑 UI 状态和交互，这些都是可以深挖的话题。下面将从前端的角度浅谈下表单的心智模型。

### 编辑 = 创建 + 初始数据

思考下创建和编辑的数据来源:

- 创建: 用户输入
- 编辑: 初始数据 + 用户输入

从 UI 的角度可以认为：编辑 = 创建 + 初始数据。构建一个支持创建/编辑的表单的步骤是:

1. 支持创建
2. 将表单的模式(mode)分为: 创建和编辑
3. 在 mode 为编辑的时候，拿到初始数据并设置到表单中去

### 应该用表单来作为详情页的载体吗？

在某些情况下，你可以直接用表单作为详情页的载体，当然此时的表单是只读的。

这种做法的好处显而易见：不用单独维护一份详情页的模版，而是直接复用创建/编辑时使用的表单页。试想如果在表单之外构建一个单独的详情页，要消耗额外的开发时间不说，改动/删除已有字段或者添加新字段都要在 2 个地方同步修改，造成了维护负担。

理论看起来很简单，可是实际操作起来没那么容易，原因是 UI 组件本身可能会带来一些限制。拿[ arco-design](https://arco.design/react/components/form)来说，如果要设置表单只读，有这些方案:

1. 直接将 Form 的 disable 属性设置为 true：`<Form disabled />`
2. 将表单中每个控件的 Readonly 设置为 true

第一种方案最简单，改动也少，但却有可读性的问题，`<Form />` 设置 `disabled`

但这会造成

### 如果表单是详情页的载体，那么应该有只读(Readonly)和编辑(Edit)的状态转换吗？

### 心智模型一：表单有只读(Readonly)和编辑(Edit)的状态转换

这种心智模型可以用以下步骤表示：

1. 当用户进入详情页时，表单的状态是只读的
2. 页面会显示一个【编辑】按钮，用户点击后表单会变为编辑态
3. 编辑态的按钮有【提交】和【取消】：点击【取消】表单会重新变为只读；点击【提交】并成功后同样，只是此时的数据是更新后的

### 心智模型二：表单没有只读(Readonly)状态，详情页即是编辑页

这种心智模型
